import{d as w,r as p,f as E,o as g,c as k,a as n,_ as S,T as G,F as q,x as M,t as x,b as C,A as I,O as j}from"./index-6caa14d4.js";const T=w({__name:"Game1",emits:["reset"],setup(A,{emit:h}){const f=p(),y=3,c=3,u=120,d=p([]),m=[],l=a=>{d.value.push(a)};return E(()=>{let a=0;for(let s=0;s<y;s++)for(let r=0;r<c;r++)d.value[a].setAttribute("data-v",`${s}-${r}`),d.value[a].style.cssText=`width:${u}px;height:${u}px;`,m.push(`s${s}-${r}`),a++;f.value.style.width=`${u*c}px`;const _=[...f.value.childNodes];_.sort(()=>Math.random()-.5),_.forEach(s=>{s.classList.add(m.shift()),s.onclick=()=>{const r=s.getAttribute("data-v").split("-").map(o=>Number(o));[`${r[0]-1}-${r[1]}`,`${r[0]+1}-${r[1]}`,`${r[0]}-${r[1]-1}`,`${r[0]}-${r[1]+1}`].forEach(o=>{const e=f.value.querySelector(`[data-v='${o}']`);if(e&&e.classList.contains("hide")){const t=e.classList[1];e.className=`map-item ${s.classList[1]}`,s.className=`map-item ${t} hide`}}),_.every(o=>"s"+o.getAttribute("data-v")===o.classList[1])&&setTimeout(()=>{confirm("拼接成功,是否重新开始游戏？")?h("reset",!0):_.forEach(e=>{e.onclick=null})},250)}}),f.value.querySelector(`.s${y-1}-${c-1}`).classList.add("hide")}),(a,_)=>(g(),k("div",{ref_key:"gamemap",ref:f,class:"gamemap"},[n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"}),n("div",{ref:l,class:"map-item"})],512))}});const B=S(T,[["__scopeId","data-v-a454006b"]]),R={class:"score"},D=w({__name:"Game2",emits:["reset"],setup(A,{emit:h}){const c=p(0);let u;const d=p(),m=p([]),l=v=>{m.value.push(v)},a=[[1,1]];let _="";const s=()=>{d.value.querySelectorAll(".player").forEach(v=>v.classList.remove("player")),a.forEach(v=>{if(d.value.querySelector(`[data-v='${v.join("-")}']`).classList.add("player"),m.value.filter(o=>o.className.indexOf("eat")!==-1).length===0){let o=Math.floor(Math.random()*400);m.value[o].classList.add("eat")}})},r=v=>{_=v.key};return E(()=>{let v=0;for(let o=0;o<20;o++)for(let e=0;e<20;e++)m.value[v].setAttribute("data-v",`${o}-${e}`),Math.random()>.9&&m.value[v].classList.add("eat"),v++;document.addEventListener("keydown",r),u=setInterval(()=>{if(_){const o=JSON.parse(JSON.stringify(a.slice(0,a.length-1)));switch(_){case"w":a[0][0]-=1;break;case"a":a[0][1]-=1;break;case"s":a[0][0]+=1;break;case"d":a[0][1]+=1;break}const e=d.value.querySelector(`[data-v='${a[0].join("-")}']`);if(e){for(let t=1;t<=a.length-1;t++)a[t]=o[t-1];e.className.indexOf("eat")>=0&&(e.classList.remove("eat"),a.push([...a[0]]),c.value++),s()}else{clearInterval(u);let t=confirm(`撞墙了,游戏结束。得分：${c.value}分,是否重新开始游戏？`);document.removeEventListener("keydown",r),t&&h("reset",!0)}}},100),s()}),G(()=>{document.removeEventListener("keydown",r),clearInterval(u)}),(v,o)=>(g(),k("div",{ref_key:"mf",ref:d,class:"mf"},[(g(),k(q,null,M(400,e=>n("div",{ref_for:!0,ref:l,class:"item",key:e})),64)),n("span",R,"分数："+x(c.value),1)],512))}});const F=S(D,[["__scopeId","data-v-93e5c903"]]),J=["data-v"],P={key:0,class:"circle"},V={key:1,class:"number"},z=w({__name:"Game3",emits:["reset"],setup(A,{emit:h}){const f=new AbortController,y=new AbortController;let c=null,u=p(0);const d=20,m=20,l=p([]),a=e=>{l.value.push(e)};let _=p(0);const s=[];for(let e=0;e<d;e++)for(let t=0;t<m;t++)s[e+"-"+t]=Math.random()>.9,_.value+=s[e+"-"+t];const r=p(),v=p();let o=[];for(let e=0;e<d;e++)for(let t=0;t<m;t++){const $=s[e+"-"+t],L=Object.values({0:s[`${e-1}-${t-1}`],1:s[`${e-1}-${t}`],2:s[`${e-1}-${t+1}`],3:s[`${e}-${t-1}`],4:s[`${e}-${t+1}`],5:s[`${e+1}-${t-1}`],6:s[`${e+1}-${t}`],7:s[`${e+1}-${t+1}`]}).filter(i=>i).length;o.push([`${e}-${t}`,$,L])}return E(()=>{l.value.forEach(e=>{e.addEventListener("click",t=>{if(e.classList.remove("hide"),_.value===r.value.querySelectorAll(".hide").length)clearInterval(c),confirm(`恭喜您成功了,用时${u.value}秒,是否重新开始游戏？`)?h("reset",!0):(f.abort(),y.abort());else if(e.querySelector(".circle"))setTimeout(()=>{clearInterval(c),confirm(`游戏失败，猜中地雷了。用时${u.value}秒,是否重新开始游戏？`)?h("reset",!0):(f.abort(),y.abort())},100);else if(e.innerText.trim()===""){const $=e.getAttribute("data-v").split("-").map(i=>Number(i)),L=i=>{[[i[0]-1,i[1]-1],[i[0]-1,i[1]],[i[0]-1,i[1]+1],[i[0],i[1]-1],[i[0],i[1]+1],[i[0]+1,i[1]-1],[i[0]+1,i[1]],[i[0]+1,i[1]+1]].forEach(N=>{const b=document.querySelector(`[data-v='${N.join("-")}']`);if(b){const O=b.querySelector(".number").innerText.trim();b.className.indexOf("hide")>=0&&O===""?(b.classList.remove("hide"),L(N)):b.classList.remove("hide")}})};L($)}},{signal:f.signal}),e.addEventListener("contextmenu",t=>{e.classList.toggle("info"),v.value.innerHTML=`地雷${_.value-r.value.querySelectorAll(".info").length}`,t.preventDefault()},{signal:y.signal})}),c=setInterval(()=>{u.value++},1e3)}),G(()=>{f.abort(),y.abort()}),(e,t)=>(g(),k("div",{ref_key:"box",ref:r,class:"box"},[n("div",{ref_key:"message",ref:v,class:"message"},"地雷: "+x(C(_))+" 时间："+x(C(u))+"s",513),(g(!0),k(q,null,M(C(o),$=>(g(),k("div",{ref_for:!0,ref:a,"data-v":$[0],class:"item hide",key:$},[$[1]?(g(),k("div",P)):(g(),k("div",V,x($[2]?$[2]:""),1))],8,J))),128))],512))}});const H=S(z,[["__scopeId","data-v-961dcda2"]]),U={class:"example-container"},K={class:"opts"},Q={class:"game-content"},W=w({__name:"Gamesexample",setup(A){const h=p(),f=p(),y=p(),c=p(sessionStorage.getItem("game")||"game1"),u=m=>{c.value=m,sessionStorage.setItem("game",m)},d=()=>{let m=c.value;c.value="",setTimeout(()=>{c.value=m},250)};return E(()=>{switch(c.value){case"game1":h.value.setAttribute("checked","");break;case"game2":f.value.setAttribute("checked","");break;case"game3":y.value.setAttribute("checked","");break}}),(m,l)=>(g(),k("div",U,[n("div",K,[n("input",{ref_key:"ipt1",ref:h,type:"radio",style:{display:"none"},id:"g1",name:"game"},null,512),n("input",{ref_key:"ipt2",ref:f,type:"radio",style:{display:"none"},id:"g2",name:"game"},null,512),n("input",{ref_key:"ipt3",ref:y,type:"radio",style:{display:"none"},id:"g3",name:"game"},null,512),n("label",{class:"game-opt g1",onClick:l[0]||(l[0]=a=>u("game1")),for:"g1"},"拼图"),n("label",{class:"game-opt g2",onClick:l[1]||(l[1]=a=>u("game2")),for:"g2"},"贪吃蛇"),n("label",{class:"game-opt g3",onClick:l[2]||(l[2]=a=>u("game3")),for:"g3"},"扫雷"),n("button",{onClick:d},"重新开始")]),n("div",Q,[c.value==="game1"?(g(),I(B,{key:0,onReset:d})):c.value==="game2"?(g(),I(F,{key:1,onReset:d})):c.value==="game3"?(g(),I(H,{key:2,onReset:d})):j("",!0)])]))}});const Y=S(W,[["__scopeId","data-v-5ecffa3b"]]);export{Y as default};
